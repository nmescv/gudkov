<!-- Для исходного изображения применить медианный сглаживающий фильтр и сформировать новое изображение на основе фильтрации. -->

<!-- <HTML>
<BODY>
<canvas id="lab02" width='700' height='500'>
</canvas>
<canvas id="lab02_c" width='700' height='500'>
</canvas>
<script>
        var canvas = document.getElementById("lab02");
        var ctx = canvas.getContext("2d");

        ctx.fillRect(10,10,10,10);

        img = new Image();

        img.setAttribute( 'crossOrigin', 'Anonymous');

        img.onload=function() {
                var canvas_c = document.getElementById("lab02_c");
                var ctx_c = canvas_c.getContext("2d");
                var idata_c = ctx_c.createImageData(canvas_c.width, canvas_c.height);

                ctx.drawImage(img, 0, 0);
                var idata = ctx.getImageData(0, 0, canvas.width, canvas.height);
                console.log(idata);
                for (let i=0; i<canvas.height; i++) {
                        for (let j=0; j<canvas.width; j++) {
                                var r = idata.data[(i*canvas.width+j)*4];
                                var g = idata.data[(i*canvas.width+j)*4+1];
                                var b = idata.data[(i*canvas.width+j)*4+2];
                                var s = idata.data[(i*canvas.width+j)*4+3];
                                if (idata.data[(i*canvas.width+j)*4+3]!= 0) {
                                        idata_c[(i*canvas_c.width+j)*4] = r;
                                        idata_c[(i*canvas_c.width+j)*4+1] = g;
                                        idata_c[(i*canvas_c.width+j)*4+2] = b;
                                        idata_c[(i*canvas_c.width+j)*4+3] = s;
                                }
                        }
                }
                ctx_c.putImageData(idata, 0, 0)


        }
        img.src = "https://www.tutorialspoint.com/images/QAicon.png";



</script>
</BODY>
</HTML>

<HTML>
<BODY>
<canvas id="lab02" width="500" height="400" style="border:1px solid black;">
</canvas>
<canvas id="lab02_1" width="500" height="400" style="border:1px solid black;">
</canvas>
<script>
        var canvas = document.getElementById("lab02");
        var ctx = canvas.getContext("2d");

        ctx.fillRect(10, 10, 10, 10);
        var img = new Image;
        img.setAttribute( 'crossOrigin', 'Anonymous');
        img.onload = function() {
                        ctx.drawImage(img, 0, 0);
                        var idata = ctx.getImageData(0, 0, canvas.width, canvas.height);
                        console.log(idata);

                        var canvas1 = document.getElementById("lab02_1");
                        var ctx1 = canvas1.getContext("2d");

                        var h = canvas.height;
                        var w = canvas.width;

                        var idata1 = ctx1.createImageData(w, h);
                        for (var i=0; i<h; i++) {
                                for (var j=0; j<w; j++) {
                                        if (idata.data[(i*w+j)*4+3] != 0) {
                                                idata1.data[(i*w+j)*4+1] = idata.data[(i*w+j)*4];
                                                idata1.data[(i*w+j)*4] = idata.data[(i*w+j)*4+1];
                                                idata1.data[(i*w+j)*4+2] = idata.data[(i*w+j)*4+2];
                                                idata1.data[(i*w+j)*4+3] = idata.data[(i*w+j)*4+3];
                                        }
                                }
                        }
                        ctx1.putImageData(idata1, 0, 0);
                };
        img.src = "https://www.tutorialspoint.com/images/QAicon.png";
</script>
</BODY>
</HTML>
-->
<HTML>
<style>
#lab02{
border:1px solid;
}
#lab02_1{
border:1px solid;
}
</style>
<BODY>
<canvas id="lab02" width="760" height="300">
</canvas>
<canvas id="lab02_1" width="760" height="300">
</canvas>
<script>
        var canvas = document.getElementById("lab02");
        var ctx = canvas.getContext("2d");
        var canvas1 = document.getElementById("lab02_1");
        var ctx1 = canvas1.getContext("2d");
        ctx.fillRect(10, 10, 10, 10);
        
        var img = new Image;

        img.setAttribute( 'crossOrigin', 'Anonymous');
        img.onload = function() {
            ctx.drawImage(img, 0, 0);
            var idata = ctx.getImageData(0, 0, canvas.width, canvas.height);
            console.log(idata);
            
            var h = canvas.height;
            var w = canvas.width;
            var idata1 = ctx1.createImageData(w, h);
            for (var i=0; i<h; i++) {
                for (var j=0; j<w; j++) {
                    if (idata.data[(i*w+j)*4+3] != 0) {
                        for (var k=0; k<=3; k++){
                            var sum = 0;
                            for (var i1 = i-1; i1<=(i+1); i1++){
                                for (var j1 = j-1; j1<=(j+1); j1++){
                                    sum += idata.data[(i*w+j1)*4+k];
                                }
                            }
                            idata1.data[(i*w+j)*4+k] = sum/9;
                        }
                    }
                }
            }
            ctx1.putImageData(idata1, 0, 0);
        };
        img.src = "https://c7.uihere.com/files/714/152/48/colt-canada-c7-rifle-airsoft-guns-firearm-m16-rifle-assault-rifle.jpg";
</script>
</BODY>
<HTML>
